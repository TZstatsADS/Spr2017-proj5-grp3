#remove columns with missing values more than 80%
extract.data<-read.csv("~/GitHub/Spr2017-proj5-grp3/data/extract_data.csv")
ED<-divide.data(extract.data)
setwd("~/GitHub/Spr2017-proj5-grp3/")
source("../lib/helper_data.R")
extract.data<-read.csv("../data/extract_data.csv")
ED<-divide.data(extract.data)
library(data.table)
library(stringr)
library(dmm)
library(Hmisc)
library(mice)
ED<-divide.data(extract.data)
ED.categorical=ED[[1]]
ED.continuous=ED[[2]]
categorical=colnames(ED.categorical)
ED.factor=clean.factor(ED.continuous)
ED.continuous=ED.continuous[,!colnames(ED.continuous) %in% colnames(ED.factor)]
ED.continuous=clean.continuous(ED.continuous)
categorical=c(categorical,colnames(ED.factor[,grep("*isna",colnames(ED.factor))]),colnames(ED.continuous[,grep("*isna",colnames(ED.continuous))]))
#combine the data
ED.final<-cbind(ED.continuous,ED.categorical,ED.factor)
ED.final=as.data.frame(ED.final)
missing=ED.final[,anyNA(ED.final)]
missing=colnames(final.mis)
final.mis<-ED.final[,which(unlist(lapply(ED.final, function(x) anyNA(x))))]
missing=colnames(final.mis)
for(i in missing)
{
ED.final[,i] = impute(ED.final[,i], fun = median)
}
setwd("../data")
